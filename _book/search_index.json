[
["plots-with-ggplot2.html", "Chapter 4 Plots with ggplot2 4.1 Zwei Funktionen von Datenvisualisierungen 4.2 Grammar of Graphics 4.3 Die Evolution einer Grafik 4.4 Welche Geoms gibts es? 4.5 Farben 4.6 Plot Theming 4.7 Some Informative Plots", " Chapter 4 Plots with ggplot2 @import url(\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css\"); html, body { font-size: 12px; } book-summary{ font-size: 14px; } 4.1 Zwei Funktionen von Datenvisualisierungen “The simple graph has brought more information to the data analyst’s mind than any other device.” — John Tukey unterschied Exploratory Data Viz vs. Publication Ready Data Viz Additional Sources An Introduction to ggplot2 (UC) 4.2 Grammar of Graphics A grammar of a language defines the rules of structuring words and phrases into meaningful expressions. A grammar of graphics defines the rules of structuring mathematic and aesthetic elements into a meaningful graph. allows the user to build a graph from concepts rather than recall of commands and options. Leland Wilkinson (2005) designed the grammar upon which ggplot2 is based. https://gallery.shinyapps.io/ggtree/ 4.3 Die Evolution einer Grafik Klicke schrittweise auf die Tabs um den Aufbau einer Grafik angefangen bei den Daten zu verdeutlichen. Data Body Aesthetic Geom Fill Alpha Labs Facets Facets start_pirus Am Anfang steht bei ggplot immer ein Dataframe. Idealerweise wurden alle Datentransformationen bereits vor der Erstellung des Plots durchgeführt. Wenn ein Plot mal nicht funktioniert wird in 95% der Fälle etwas mit den Daten oder deren Format nicht stimmen. Deshalb ist es wichtig die Daten und deren Struktur zu verstehen. ## Observations: 5 ## Variables: 18 ## $ subject_id &lt;dbl&gt; 1000, 1001, 1002, 1005, 1006 ## $ date &lt;date&gt; 2002-05-08, 2001-11-25, 1997-05-01, 1993-04-10, … ## $ age &lt;dbl&gt; 32, 20, 28, 25, 25 ## $ male &lt;dbl&gt; 1, 1, 1, 1, 1 ## $ gender &lt;dbl&gt; 2, 2, 2, 2, 2 ## $ married &lt;dbl&gt; 1, 0, 1, 1, 0 ## $ student &lt;dbl&gt; 1, 1, 0, 0, 0 ## $ unemployed &lt;dbl&gt; 0, 0, 0, 0, 0 ## $ mental &lt;dbl&gt; 0, 0, 0, 0, 0 ## $ abuse_child &lt;dbl&gt; 0, 0, 0, 0, 0 ## $ crime_history &lt;fct&gt; Violent, None, Violent, None, NA ## $ violent &lt;chr&gt; &quot;Violent&quot;, &quot;None-Violent&quot;, &quot;None-Violent&quot;, &quot;Viole… ## $ extent &lt;dbl&gt; 2, 0, NA, 5, 5 ## $ terror_group &lt;chr&gt; &quot;al-Qaeda core&quot;, &quot;Taliban&quot;, &quot;al-Qaeda core&quot;, NA, … ## $ radicalization &lt;dbl&gt; 4, 5, 5, 5, 5 ## $ clique &lt;dbl&gt; 1, 1, 1, 1, 1 ## $ terror_type &lt;fct&gt; Islamism, Islamism, Islamism, Islamism, Islamism ## $ year &lt;dbl&gt; 2002, 2001, 1997, 1993, 1993 start_pirus %&gt;% ggplot() Durch die Funktion ggplot() wird das Layout der Grafik initialisiert. Noch sind keine weiteren Informationen spezifiziert (Note: nicht ggplot2, der Name des packages). start_pirus %&gt;% ggplot() + aes(x = terror_type) Die Funktion aes() definiert welche Variablen für welche Achsen spezifiziert werden. aes() hat viele weitere Parameter (Optionen): x: positioning along x-axis y: positioning along y-axis color: color of objects; for 2-d objects, the color of the object’s outline (compare to fill below) fill: fill color of objects alpha: transparency of objects lineterror_type: how lines should be drawn (solid, dashed, dotted, etc.) shape: shape of markers in scatter plots size: how large objects appear start_pirus %&gt;% ggplot() + aes(x = terror_type) + geom_bar() Es gibt unzählige geom_ Funktionen welche für die Datendarstellung verantwortlich sind und ein eine bestimmtes Datenformat erwarten. start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar() Es gibt zwei Farb-parameter fill und colour. fill wird verwendet um Flächen zu kolorieren und colour um Lines (Outlines) und Points einzufärben. start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) Mit alpha wird die Intensität der Farbe eingestellt. 0 bedeutet komplett durchsichtig; 1 volle Sättigung. start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + labs(x = &quot;Terror Types&quot;, y = &quot;Frequency&quot;, title = &quot;Frequency by Terror Type&quot;) Die Lables an einem Plot dürfen natürlich nicht fehlen. start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + labs(x = &quot;Terror Types&quot;, y = &quot;Frequency&quot;, title = &quot;Frequency by Terror Type&quot;) + facet_wrap(~violent) Mit facet_wrap kann ein Plot über mehrere Dimensionen aufgefächert werden. start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + labs(x = &quot;&quot;, y = &quot;Frequency&quot;, title = &quot;Frequency by Terror Type&quot;) + facet_wrap(~violent) + theme_classic() + theme(legend.position = &quot;bottom&quot;) Mit facet_wrap kann ein Plot über mehrere Dimensionen aufgefächert werden. 4.4 Welche Geoms gibts es? geom_&lt;type&gt; geoms_list &lt;- help.search(&quot;geom_&quot;, package = &quot;ggplot2&quot;) geoms_list$matches %&gt;% select(Topic, Title) %&gt;% slice(1:10) 4.5 Farben colourpicker -&gt; Addin 4.6 Plot Theming Deafult BW HC Gdocs start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) start_pirus %&gt;% count(year, terror_type) %&gt;% ggplot(aes(year, n, colour = terror_type)) + geom_line() start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + scale_fill_grey(&quot;TITLE&quot;) + theme_bw() start_pirus %&gt;% count(year, terror_type) %&gt;% ggplot(aes(year, n, colour = terror_type)) + geom_line() + scale_colour_grey(&quot;TITLE&quot;) + theme_bw() library(ggthemes) start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + scale_fill_hc(name = &quot;TITLE&quot;) + theme_hc() library(ggthemes) start_pirus %&gt;% count(year, terror_type) %&gt;% ggplot(aes(year, n, colour = terror_type)) + geom_line() + scale_colour_hc(name = &quot;TITLE&quot;) + theme_hc() library(ggthemes) start_pirus %&gt;% ggplot() + aes(x = terror_type, fill = terror_type) + geom_bar(alpha = .7) + scale_fill_gdocs(name = &quot;TITLE&quot;) + theme_gdocs() library(ggthemes) start_pirus %&gt;% count(year, terror_type) %&gt;% ggplot(aes(year, n, colour = terror_type)) + geom_line() + scale_colour_gdocs(name = &quot;TITLE&quot;) + theme_gdocs() 4.7 Some Informative Plots start_pirus %&gt;% ggplot(aes(date, terror_type, colour = terror_type)) + geom_jitter(alpha = .5) + theme(legend.position = &quot;none&quot;) + labs(x = &quot;&quot;, y = &quot;&quot;) start_pirus %&gt;% ggplot(aes(date, terror_type, colour = terror_type)) + geom_jitter(alpha = .5) + theme(legend.position = &quot;none&quot;) + labs(x = &quot;&quot;, y = &quot;&quot;) + facet_wrap(~violent) start_pirus %&gt;% mutate(year = lubridate::year(date)) %&gt;% count(year, violent) %&gt;% ggplot(aes(year, n, colour = violent)) + geom_line() start_pirus %&gt;% count(year, terror_type) %&gt;% ggplot(aes(year, n, colour = terror_type)) + geom_line() "]
]
