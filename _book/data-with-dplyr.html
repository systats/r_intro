<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 3 Data with dplyr | R Introduction</title>
  <meta name="description" content="Chapter 3 Data with dplyr | R Introduction">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 3 Data with dplyr | R Introduction" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data with dplyr | R Introduction" />
  
  
  

<meta name="author" content="Fabio Votta &amp; Simon Roth">


<meta name="date" content="2019-04-18">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="grundlagen.html">
<link rel="next" href="ggplot2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="grundlagen.html"><a href="grundlagen.html"><i class="fa fa-check"></i><b>2</b> Grundlagen</a><ul>
<li class="chapter" data-level="2.0.1" data-path="grundlagen.html"><a href="grundlagen.html#r-als-taschenrechner"><i class="fa fa-check"></i><b>2.0.1</b> R als Taschenrechner</a></li>
<li class="chapter" data-level="2.0.2" data-path="grundlagen.html"><a href="grundlagen.html#objekte-und-zuweisung"><i class="fa fa-check"></i><b>2.0.2</b> Objekte und Zuweisung</a></li>
<li class="chapter" data-level="2.0.3" data-path="grundlagen.html"><a href="grundlagen.html#wichtige-operatoren"><i class="fa fa-check"></i><b>2.0.3</b> Wichtige Operatoren</a></li>
<li class="chapter" data-level="2.0.4" data-path="grundlagen.html"><a href="grundlagen.html#vektoren-i"><i class="fa fa-check"></i><b>2.0.4</b> Vektoren I</a></li>
<li class="chapter" data-level="2.0.5" data-path="grundlagen.html"><a href="grundlagen.html#funktionen"><i class="fa fa-check"></i><b>2.0.5</b> Funktionen</a></li>
<li class="chapter" data-level="2.0.6" data-path="grundlagen.html"><a href="grundlagen.html#vektoren-ii"><i class="fa fa-check"></i><b>2.0.6</b> Vektoren II</a></li>
<li class="chapter" data-level="2.0.7" data-path="grundlagen.html"><a href="grundlagen.html#dataframes"><i class="fa fa-check"></i><b>2.0.7</b> Dataframes</a></li>
<li class="chapter" data-level="2.1" data-path="grundlagen.html"><a href="grundlagen.html#profiles-of-individual-radicalization-in-the-united-states-pirus"><i class="fa fa-check"></i><b>2.1</b> Profiles of Individual Radicalization in the United States (PIRUS)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html"><i class="fa fa-check"></i><b>3</b> Data with <code>dplyr</code></a><ul>
<li class="chapter" data-level="3.0.1" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#mutate"><i class="fa fa-check"></i><b>3.0.1</b> mutate</a></li>
<li class="chapter" data-level="3.0.2" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#ifelse"><i class="fa fa-check"></i><b>3.0.2</b> ifelse</a></li>
<li class="chapter" data-level="3.0.3" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#case_when"><i class="fa fa-check"></i><b>3.0.3</b> case_when</a></li>
<li class="chapter" data-level="3.0.4" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#select"><i class="fa fa-check"></i><b>3.0.4</b> select</a></li>
<li class="chapter" data-level="3.0.5" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#filter"><i class="fa fa-check"></i><b>3.0.5</b> filter</a></li>
<li class="chapter" data-level="3.0.6" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#rename"><i class="fa fa-check"></i><b>3.0.6</b> rename</a></li>
<li class="chapter" data-level="3.0.7" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#pipe"><i class="fa fa-check"></i><b>3.0.7</b> Pipe %&gt;%</a></li>
<li class="chapter" data-level="3.0.8" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#variablen-auspragungen-zahlen-mit-count-tabyl-und-tally"><i class="fa fa-check"></i><b>3.0.8</b> Variablen(-ausprägungen) zählen mit <code>count</code>, <code>tabyl</code> und <code>tally</code></a></li>
<li class="chapter" data-level="3.0.9" data-path="data-with-dplyr.html"><a href="data-with-dplyr.html#group_by-summary"><i class="fa fa-check"></i><b>3.0.9</b> group_by + summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>4</b> <code>ggplot2</code></a><ul>
<li class="chapter" data-level="4.1" data-path="ggplot2.html"><a href="ggplot2.html#zwei-funktionen-von-datenvisualisierungen"><i class="fa fa-check"></i><b>4.1</b> Zwei Funktionen von Datenvisualisierungen</a></li>
<li class="chapter" data-level="4.2" data-path="ggplot2.html"><a href="ggplot2.html#grammar-of-graphics"><i class="fa fa-check"></i><b>4.2</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="4.3" data-path="ggplot2.html"><a href="ggplot2.html#die-evolution-einer-grafik"><i class="fa fa-check"></i><b>4.3</b> Die Evolution einer Grafik</a></li>
<li class="chapter" data-level="4.4" data-path="ggplot2.html"><a href="ggplot2.html#welche-geoms-gibts-es"><i class="fa fa-check"></i><b>4.4</b> Welche Geoms gibts es?</a></li>
<li class="chapter" data-level="4.5" data-path="ggplot2.html"><a href="ggplot2.html#farben"><i class="fa fa-check"></i><b>4.5</b> Farben</a></li>
<li class="chapter" data-level="4.6" data-path="ggplot2.html"><a href="ggplot2.html#plot-theming"><i class="fa fa-check"></i><b>4.6</b> Plot Theming</a></li>
<li class="chapter" data-level="4.7" data-path="ggplot2.html"><a href="ggplot2.html#some-informative-plots"><i class="fa fa-check"></i><b>4.7</b> Some Informative Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>5</b> Analysis</a><ul>
<li class="chapter" data-level="5.1" data-path="analysis.html"><a href="analysis.html#packages"><i class="fa fa-check"></i><b>5.1</b> Packages</a></li>
<li class="chapter" data-level="5.2" data-path="analysis.html"><a href="analysis.html#load-data"><i class="fa fa-check"></i><b>5.2</b> Load Data</a></li>
<li class="chapter" data-level="5.3" data-path="analysis.html"><a href="analysis.html#lineare-regression"><i class="fa fa-check"></i><b>5.3</b> Lineare Regression</a></li>
<li class="chapter" data-level="5.4" data-path="analysis.html"><a href="analysis.html#logistische-regression"><i class="fa fa-check"></i><b>5.4</b> Logistische Regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Introduction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-with-dplyr" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data with <code>dplyr</code></h1>
<p><img src="images/dplyr.png" width = "20%></p>
<p><br></p>
<p>Neben <code>Base R</code> gibt es das <strong>Tidyverse</strong>, dass viele mächtige Packages enthält!</p>
<p>Hier eine kleine Übersicht von relevanten Funktionen, die wir brauchen werden:</p>
<table>
<thead>
<tr class="header">
<th>Bedeutung</th>
<th>tidyverse - Funktionen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Neue Variable erstellen</td>
<td>mutate()</td>
</tr>
<tr class="even">
<td>Rekodieren (binär)</td>
<td>ifelse()</td>
</tr>
<tr class="odd">
<td>Rekodieren</td>
<td>case_when()</td>
</tr>
<tr class="even">
<td>Variablen auswählen</td>
<td>select()</td>
</tr>
<tr class="odd">
<td>Subset erstellen</td>
<td>filter()</td>
</tr>
<tr class="even">
<td>Variablennamen ändern</td>
<td>rename()</td>
</tr>
<tr class="odd">
<td>pipe operator</td>
<td>%&gt;%</td>
</tr>
<tr class="even">
<td>Datensatz gruppieren</td>
<td>group_by()</td>
</tr>
<tr class="odd">
<td>Zusammenfassen</td>
<td>summarize()</td>
</tr>
<tr class="even">
<td>Zähle die Ausprägungen</td>
<td>count()</td>
</tr>
</tbody>
</table>
<p>Zunächst einmal müssen wir das Package installieren und laden. Das geht mit in Base R mit den folgenden zwei Befehlen: <code>install.packages</code> und <code>library</code>.</p>
<p>Eine viel enstpannteres Funktion, welche Packages gleichzeitig installiert und einlädt nennt sich <code>pacman</code>. Zunächsten installieren wir es:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;pacman&quot;)</span></code></pre></div>
<p>Wir laden dann alle packages die wir brauchen auf folgende Weise:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pacman<span class="op">::</span><span class="kw">p_load</span>(tidyverse)</code></pre></div>
<p>Wenn man ein Package nicht laden will sondern nur eine Funktion daraus, dann kann man auch zwei Doppelpunkte <code>::</code> hinter den Packagenamen schreiben und die nötige Funktion danach denotieren.</p>
<p><strong>Let’s get it started!</strong></p>
<p>Wieder zu den Beispieldaten:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;start_pirus.Rdata&quot;</span>)</code></pre></div>
<div id="mutate" class="section level3">
<h3><span class="header-section-number">3.0.1</span> mutate</h3>
<p><strong>Neue Variablen erstellen mit mutate()</strong></p>
<p>Mit <code>mutate()</code> wird/werden eine oder mehrere neue Variable(n) erzeugt und an den Datensatz hinten angefügt.</p>
<p><strong>Beispiel</strong></p>
<p>Statt dem Alter wollen wir nun das Geburstjahr haben. Einfacherweise ziehen wir das jetzige Jahr (2018) vom Alter ab um das Geburtsjahr zu erhalten. Die neue Variable nennen wir <code>birth</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(start_pirus, <span class="dt">birth =</span> <span class="dv">2018</span> <span class="op">-</span><span class="st"> </span>age)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 19
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 11 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;</code></pre>
<p>Weisen wir den Datensatz wieder <code>start_pirus</code> zu, so wird unsere Veränderung auch im Objekt festgehalten</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">birth =</span> <span class="dv">2018</span> <span class="op">-</span><span class="st"> </span>age)

start_pirus</code></pre></div>
<pre><code>## # A tibble: 1,865 x 19
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 11 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;</code></pre>
<p><strong>Aufgabe</strong></p>
<p>Der Radikalisierungsindikator (<code>radicalization</code>) geht von 1 - 5. Z-standardisiere die variable mit <code>scale()</code> und speichere sie als <code>radicalization_z</code> ab. Mit <code>mutate()</code> wird die Variable hinten angehangen.</p>
</div>
<div id="ifelse" class="section level3">
<h3><span class="header-section-number">3.0.2</span> ifelse</h3>
<p>Die Funktion <code>ifelse()</code> testet eine logische Bedingung in ihrem ersten Argument. Wenn der Test <code>TRUE</code> ist, gibt <code>ifelse()</code> das zweite Argument zurück. Wenn der Test <code>FALSE</code> ist, gibt <code>ifelse()</code> das dritte Argument zurück.</p>
<p>Also in folgender Form:</p>
<p><code>ifelse(logischer Test, was passiert wenn zutrifft, was passiert wenn nicht zutrifft)</code></p>
<p>Das können wir in Kombination mit <code>mutate</code> benutzen.</p>
<p><strong>Beispiel:</strong></p>
<p>Nehmen wir an, dass wir die Altervariable als eine dummy Variable (zwei Ausprägungen) benutzen wollen. Am besten geht das mit <code>ifelse()</code>. Kodieren wir doch einmal die 18-40 Jährigen als eine Gruppe und über 40 Jährige als eine andere Gruppe.</p>
<p>Eine Variable <code>u40</code> erstellen welche die 18 bis 40 Jährigen und die über 40 Jährigen in eine Gruppe teilt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(start_pirus, <span class="dt">u40 =</span> <span class="kw">ifelse</span>(age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40</span>, <span class="st">&quot;younger&quot;</span> ,<span class="st">&quot;older&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, u40 &lt;chr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#darauf achten, dass bei strings (&#39;Wörtern&#39;) Anführungsstriche gemacht werden müssen!</span></code></pre></div>
<p><strong>Aufgabe</strong></p>
<ol start="7" style="list-style-type: decimal">
<li>Kodiere <code>male</code> in der folgenden Art und Weise und nenne die Variable <code>male_label</code>:</li>
</ol>
<p>1 = “männlich” 2 = “weiblich”</p>
<p>Überschreibe <code>start_pirus</code> zeige den Datensatz!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">male_label =</span> <span class="kw">ifelse</span>(male <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;male&quot;</span> ,<span class="st">&quot;female&quot;</span>))
<span class="co">#darauf achten, dass bei strings (&#39;Wörtern&#39;) Anführungsstriche gemacht werden müssen!</span>

start_pirus </code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;fct&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
</div>
<div id="case_when" class="section level3">
<h3><span class="header-section-number">3.0.3</span> case_when</h3>
<p>Was aber wenn wir mehrere Werte rekodieren wollen? Enter the world of <code>case_when</code>.</p>
<p>Mit <code>case_when</code> können wir einzelne Variablen rekodieren und sogar Bedingungen nach Lust und Laune mixen. Hier ein Beispiel:</p>
<p>Variable Description: Prior to their radicalization, does the individual have a history of involvement in non-ideologically motivated criminal activities?</p>
<ul>
<li>0 = No previous criminal activity<br />
</li>
<li>1 = Previous (non-violent) minor criminal activity (e.g., convicted of a misdemeanor crime)</li>
<li>2 = Previous (non-violent) serious criminal activity (e.g., convicted of a felony crime)</li>
<li>3 = Previous violent crime</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus &lt;-<span class="st"> </span><span class="kw">mutate</span>(start_pirus, <span class="dt">crime_history =</span> <span class="kw">case_when</span>(
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;None&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &quot;Non-Violent&quot;</span>,
    crime_history <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> &quot;Violent&quot;</span>
  )) 

start_pirus</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;, clique &lt;dbl&gt;,
## #   terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Jede Bedingung untereinander gereiht und mit einem Komma getrennt. Wenn eine Bedingung ein <code>TRUE</code> Statement ist, dann wird mit dem <code>~</code> Operator der entsprechende Wert zugewiesen. Gibt man <code>TRUE</code> selbst an, so kann man “alle anderen” Ausprägungen, die nicht vorher abgefragt worden sind einen Wert zuweisen. Gibt man die Originalvariable an, so bleiben die restlichen Werte wie sie sind.</p>
</div>
<div id="select" class="section level3">
<h3><span class="header-section-number">3.0.4</span> select</h3>
<p>Mit <code>select</code> werden Spalten (=Vektoren/Variablen) mittels dem Variablennamen oder einer Hilfsfunktion ausgewählt.</p>
<p>Wählen wir wieder nur die zwei folgenden Variables aus:</p>
<ul>
<li><code>age</code></li>
<li><code>gender</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , age, gender)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 2
##      age gender
##    &lt;dbl&gt;  &lt;dbl&gt;
##  1    32      2
##  2    20      2
##  3    28      2
##  4    25      2
##  5    25      2
##  6    27      2
##  7    23      2
##  8    28      2
##  9    26      2
## 10    25      2
## # … with 1,855 more rows</code></pre>
<p><code>Select</code> eignet sich auch dafür Variablen aus einem bestehenden dataframe zu entfernen. Dies ist ganz einfach zu lösen mit einem <code>-</code> (Minus).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , <span class="op">-</span>age, <span class="op">-</span>gender)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 18
##    subject_id date        male married student unemployed mental
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
##  1       1000 2002-05-08     1       1       1          0      0
##  2       1001 2001-11-25     1       0       1          0      0
##  3       1002 1997-05-01     1       1       0          0      0
##  4       1005 1993-04-10     1       1       0          0      0
##  5       1006 1993-03-04     1       0       0          0      0
##  6       1010 2003-03-01     1       1       0          0      0
##  7       1013 2002-09-10     1       1       0          1      0
##  8       1014 2002-09-15     1       1       0          0      0
##  9       1015 2002-10-21     1       1       0          0      0
## 10       1016 2002-09-18     1       1       0          0      0
## # … with 1,855 more rows, and 11 more variables: abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>Aufgaben</strong></p>
<ol start="10" style="list-style-type: decimal">
<li>Wähle die folgende Variablen aus:</li>
</ol>
<ul>
<li><code>terror_group</code></li>
<li><code>terror_type</code></li>
<li><code>crime_history</code></li>
</ul>
<ol start="11" style="list-style-type: decimal">
<li>Wähle alle Variablen <strong>außer</strong> <code>student</code> und <code>age</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , terror_group, terror_type, crime_history)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 3
##    terror_group  terror_type crime_history
##    &lt;chr&gt;         &lt;fct&gt;       &lt;chr&gt;        
##  1 al-Qaeda core Islamism    &lt;NA&gt;         
##  2 Taliban       Islamism    &lt;NA&gt;         
##  3 al-Qaeda core Islamism    &lt;NA&gt;         
##  4 &lt;NA&gt;          Islamism    &lt;NA&gt;         
##  5 &lt;NA&gt;          Islamism    &lt;NA&gt;         
##  6 al-Qaeda core Islamism    &lt;NA&gt;         
##  7 al-Qaeda core Islamism    &lt;NA&gt;         
##  8 al-Qaeda core Islamism    &lt;NA&gt;         
##  9 al-Qaeda core Islamism    &lt;NA&gt;         
## 10 al-Qaeda core Islamism    &lt;NA&gt;         
## # … with 1,855 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(start_pirus , <span class="op">-</span>student, <span class="op">-</span>age)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 18
##    subject_id date        male gender married unemployed mental abuse_child
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
##  1       1000 2002-05-08     1      2       1          0      0           0
##  2       1001 2001-11-25     1      2       0          0      0           0
##  3       1002 1997-05-01     1      2       1          0      0           0
##  4       1005 1993-04-10     1      2       1          0      0           0
##  5       1006 1993-03-04     1      2       0          0      0           0
##  6       1010 2003-03-01     1      2       1          0      0           0
##  7       1013 2002-09-10     1      2       1          1      0           0
##  8       1014 2002-09-15     1      2       1          0      0           0
##  9       1015 2002-10-21     1      2       1          0      0           0
## 10       1016 2002-09-18     1      2       1          0      0           0
## # … with 1,855 more rows, and 10 more variables: crime_history &lt;chr&gt;,
## #   violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;, radicalization &lt;dbl&gt;,
## #   clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;, birth &lt;dbl&gt;,
## #   male_label &lt;chr&gt;</code></pre>
</div>
<div id="filter" class="section level3">
<h3><span class="header-section-number">3.0.5</span> filter</h3>
<p><strong>Zeilen auswählen mit filter()</strong></p>
<p>Mit <code>filter()</code> behält man oder selektiert man Zeilen eines Datensatzes, welche bestimmte logische Kriterien oder Konditionen erfüllen. Damit wird ein Subset (Untergruppe) gebildet. Wir wählen jetzt nur die Fälle aus, welche unser Kriterium erfüllen. Jetzt zeigen wir uns Personen an, welche zur <em>Far Right</em> gehören.</p>
<p><strong>Beispiel:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(start_pirus, terror_type <span class="op">==</span><span class="st"> &quot;Far Right&quot;</span>)</code></pre></div>
<p><strong>Aufgaben</strong></p>
<ol start="12" style="list-style-type: decimal">
<li><p>Filtere den Datensatz und zeige nur die Personen, welche sich mit der <code>Ku Klux Klan</code> identifizieren.</p></li>
<li><p>Filtere den Datensatz und zeige nur die Personen, welche über 40 Jahre alt sind und eher erfolgreich waren (<code>extent &gt; 3</code>).</p></li>
<li><p>Filtere den Datensatz und zeige nur weibliche Personen, welche eine gewalttätige kriminelle Vergangenheit hatten <code>criminal_history</code>.</p></li>
</ol>
<p><em>Hier nochmal die Operatoren zum spicken ;)</em></p>
<ul>
<li><code>==</code> (logisch) ist gleich</li>
<li><code>!=</code> (logisch) ist ungleich</li>
<li><code>&gt;</code> größer als</li>
<li><code>&lt;</code> kleiner als</li>
<li><code>&gt;=</code> größer gleich</li>
<li><code>&lt;=</code> kleiner gleich</li>
</ul>
</div>
<div id="rename" class="section level3">
<h3><span class="header-section-number">3.0.6</span> rename</h3>
<p>Variablen umbennen mit <code>rename()</code></p>
<p>Mit <code>rename()</code> lassen sich die Variablen umbennen. Beispielhaft ?bersetzen wir <code>terror_group</code>, <code>radicalization</code> und <code>terror_type</code> Variablennamen ins Deutsche.</p>
<p><strong>Beispiel:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rename</span>(start_pirus, <span class="dt">group =</span> terror_group,  <span class="dt">rad =</span> radicalization,  <span class="dt">ideology =</span> terror_type)</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   group &lt;chr&gt;, rad &lt;dbl&gt;, clique &lt;dbl&gt;, ideology &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Ist eine Abkürzung des folgenden Code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus, <span class="dt">group =</span> terror_group)
start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus2, <span class="dt">rad =</span> radicalization)
start_pirus2 &lt;-<span class="st"> </span><span class="kw">rename</span>(start_pirus2, <span class="dt">ideology =</span> terror_type)

start_pirus2</code></pre></div>
<pre><code>## # A tibble: 1,865 x 20
##    subject_id date         age  male gender married student unemployed
##         &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1       1000 2002-05-08    32     1      2       1       1          0
##  2       1001 2001-11-25    20     1      2       0       1          0
##  3       1002 1997-05-01    28     1      2       1       0          0
##  4       1005 1993-04-10    25     1      2       1       0          0
##  5       1006 1993-03-04    25     1      2       0       0          0
##  6       1010 2003-03-01    27     1      2       1       0          0
##  7       1013 2002-09-10    23     1      2       1       0          1
##  8       1014 2002-09-15    28     1      2       1       0          0
##  9       1015 2002-10-21    26     1      2       1       0          0
## 10       1016 2002-09-18    25     1      2       1       0          0
## # … with 1,855 more rows, and 12 more variables: mental &lt;dbl&gt;,
## #   abuse_child &lt;dbl&gt;, crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;,
## #   group &lt;chr&gt;, rad &lt;dbl&gt;, clique &lt;dbl&gt;, ideology &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>So sparen wir uns da mehrmals abspeichern! Noch besser geht das aber mit der…</p>
</div>
<div id="pipe" class="section level3">
<h3><span class="header-section-number">3.0.7</span> Pipe %&gt;%</h3>
<p>Mit der Hilfe von <code>%&gt;%</code> können alle diese Operationen auf einmal ausgeführt werden!</p>
<p>[Prozent größer Prozent] wird pipe operator genannt. Diese Pipe ermöglicht es Daten einfacher, verständlicher und lesbarer und ohne Verlust von Flexibilität zu transformieren.</p>
<p><strong>Wichtig ist:</strong> Den pipe operator kann man sich dabei als “danach” vorstellen.</p>
<p>So haben wir es bisher kennengelernt Funktionen zu benutzen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">slice</span>(start_pirus, <span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 20
##   subject_id date         age  male gender married student unemployed
##        &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1       1000 2002-05-08    32     1      2       1       1          0
## # … with 12 more variables: mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Wo das erste Argument immer <em>der Datensatz</em> ist.</p>
<p>Mit Hilfe der Pipe können wir das ganze so schreiben:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 20
##   subject_id date         age  male gender married student unemployed
##        &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1       1000 2002-05-08    32     1      2       1       1          0
## # … with 12 more variables: mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Sequences of functions make you read inside out</p>
<p>So weit so gut. Aber die wahre Power entfaltet die Pipe erst bei der Anwendung von mehreren Funktionen. Hier ein Beispiel wie ein etwas verwirrender Code aussehen kann.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">slice</span>(<span class="kw">filter</span>(start_pirus, crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>), <span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # … with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p>Diese Methode zwingt uns dazu von innen nach außen zu lesen! <em>Grausam!</em></p>
<blockquote>
<p>Wohingegen die Pipe es uns ermöglicht von links nach rechts und von oben nach unten zu lesen1</p>
</blockquote>
<p>Wie gewohnt!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # … with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>Ein weiterer Vorteil</strong></p>
<p>Wenn wir Funktionen einzelnen ausführen dann müssen wir uch jeden Schritt einzeln mit einem neuen Objekt festhalten:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pirus_violent &lt;-<span class="st"> </span><span class="kw">filter</span>(start_pirus, crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>)

pirus_alter &lt;-<span class="st"> </span><span class="kw">arrange</span>(pirus_violent, age)

pirus_jung &lt;-<span class="st"> </span><span class="kw">slice</span>(pirus_alter, <span class="dv">1</span>) 

pirus_jung</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # … with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<blockquote>
<p>Wohingegen die Pipe es uns ermöglicht den Datensatz nur einmal zu spezifizieren</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pirus_jung &lt;-<span class="st"> </span>start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(crime_history <span class="op">==</span><span class="st"> &quot;Violent&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(age) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) 

pirus_jung</code></pre></div>
<pre><code>## # A tibble: 0 x 20
## # … with 20 variables: subject_id &lt;dbl&gt;, date &lt;date&gt;, age &lt;dbl&gt;,
## #   male &lt;dbl&gt;, gender &lt;dbl&gt;, married &lt;dbl&gt;, student &lt;dbl&gt;,
## #   unemployed &lt;dbl&gt;, mental &lt;dbl&gt;, abuse_child &lt;dbl&gt;,
## #   crime_history &lt;chr&gt;, violent &lt;dbl&gt;, extent &lt;dbl&gt;, terror_group &lt;chr&gt;,
## #   radicalization &lt;dbl&gt;, clique &lt;dbl&gt;, terror_type &lt;fct&gt;, year &lt;dbl&gt;,
## #   birth &lt;dbl&gt;, male_label &lt;chr&gt;</code></pre>
<p><strong>dataframe first, functions second</strong></p>
<p>Jetzt seid ihr dran!</p>
<p>Benutzt die pipe für folgende Aufgaben:</p>
<ol start="15" style="list-style-type: decimal">
<li>Selektiere die folgenden Variablen</li>
</ol>
<ul>
<li><code>male</code></li>
<li><code>age</code></li>
<li><code>radicalization</code></li>
<li><code>terror_type</code></li>
<li><code>terror_group</code></li>
</ul>
<ol start="16" style="list-style-type: decimal">
<li><p>Filtere die Variable nur nach Männern</p></li>
<li><p>Erstelle eine neue Variable namens <code>strong_believer</code> mit der Ausprägung <code>1</code> für den Wert 5 von <code>radicalization</code> und <code>0</code> für alle anderen.</p></li>
<li><p>Benenne die Variable <code>terror_type</code> in <code>ideology</code> um.</p></li>
<li><p>Selektiere die folgenden Variablen</p></li>
</ol>
<ul>
<li><code>strong_believer</code></li>
<li><code>ideology</code></li>
<li><code>age</code></li>
</ul>
</div>
<div id="variablen-auspragungen-zahlen-mit-count-tabyl-und-tally" class="section level3">
<h3><span class="header-section-number">3.0.8</span> Variablen(-ausprägungen) zählen mit <code>count</code>, <code>tabyl</code> und <code>tally</code></h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(terror_group, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 80 x 2
##    terror_group                                    n
##    &lt;chr&gt;                                       &lt;int&gt;
##  1 &lt;NA&gt;                                          730
##  2 Ku Klux Klan                                  148
##  3 Islamic State of Iraq and the Levant (ISIL)   146
##  4 Jewish Defense League (JDL)                    60
##  5 al-Shabaab                                     57
##  6 Weather Underground                            54
##  7 al-Qaeda core                                  51
##  8 Earth Liberation Front (ELF)                   44
##  9 Animal Liberation Front (ALF)                  36
## 10 Aryan Nations                                  36
## # … with 70 more rows</code></pre>
<p><strong>ist das gleiche wie:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>janitor<span class="op">::</span><span class="kw">tabyl</span>(terror_type)</code></pre></div>
<pre><code>##   terror_type   n   percent
##  Single Issue 340 0.1823056
##      Far Left 324 0.1737265
##     Far Right 746 0.4000000
##      Islamism 455 0.2439678</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(terror_type, gender, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 8 x 3
##   terror_type  gender     n
##   &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 Far Right         2   706
## 2 Islamism          2   427
## 3 Single Issue      2   305
## 4 Far Left          2   245
## 5 Far Left          1    79
## 6 Far Right         1    40
## 7 Single Issue      1    35
## 8 Islamism          1    28</code></pre>
</div>
<div id="group_by-summary" class="section level3">
<h3><span class="header-section-number">3.0.9</span> group_by + summary</h3>
<p><strong>Gruppieren und Summaries</strong></p>
<p>Mit <code>group_by()</code> werden die nachfolgden Operationen gruppenweise ausgeführt. Mit <code>summarise()</code> werden die gruppierten Variablen aggregiert</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> T))</code></pre></div>
<p>Können wir noch mit der Standardabweichung erweitern:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_extent =</span> <span class="kw">mean</span>(extent, <span class="dt">na.rm =</span> T), 
            <span class="dt">sd_extent =</span> <span class="kw">sd</span>(extent, <span class="dt">na.rm =</span> T)) </code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   terror_type  mean_extent sd_extent
##   &lt;fct&gt;              &lt;dbl&gt;     &lt;dbl&gt;
## 1 Single Issue        2.38      2.26
## 2 Far Left            2.59      2.33
## 3 Far Right           2.27      2.21
## 4 Islamism            1.16      1.72</code></pre>
<p>Und noch ordnen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Gruppenvariable</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_extent =</span> <span class="kw">mean</span>(extent, <span class="dt">na.rm =</span> T), 
            <span class="dt">sd_extent =</span> <span class="kw">sd</span>(extent, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean_extent))</code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   terror_type  mean_extent sd_extent
##   &lt;fct&gt;              &lt;dbl&gt;     &lt;dbl&gt;
## 1 Far Left            2.59      2.33
## 2 Single Issue        2.38      2.26
## 3 Far Right           2.27      2.21
## 4 Islamism            1.16      1.72</code></pre>
<p><strong>Mit tally Ausprägungen zählen</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start_pirus <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(terror_type, gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">tally</span>()</code></pre></div>
<pre><code>## # A tibble: 8 x 3
## # Groups:   terror_type [4]
##   terror_type  gender     n
##   &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 Single Issue      1    35
## 2 Single Issue      2   305
## 3 Far Left          1    79
## 4 Far Left          2   245
## 5 Far Right         1    40
## 6 Far Right         2   706
## 7 Islamism          1    28
## 8 Islamism          2   427</code></pre>
<p><strong>Aufgabe</strong></p>
<ol start="20" style="list-style-type: decimal">
<li>Gruppiere <code>start_pirus</code> nach <code>gender</code> und rechne den Mittelwerte des Alters (<code>age</code>) per Geschlecht aus. Vergiss nicht <code>na.rm = T</code> zu spezifizieren!</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="grundlagen.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["r_intro.pdf", "r_intro.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
